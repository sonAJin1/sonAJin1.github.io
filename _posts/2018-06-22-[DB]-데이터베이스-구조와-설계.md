
> 효율적이면서 유용한 데이터베이스를 설계하는 것은, 다음 단계와 같은 적절한 프로세스를 따라가는지 아닌지와 관계있습니다.
>






## 1. 요구조건 분석 : 데이터베이스의 용도 식별하기

데이터베이스의 **사용자, 사용목적, 사용범위, 제약조건 등**에 대한 내용을 정리하고 명세서를 작성합니다.

이때 정보를 최대한 작지만 유용한 단위로 쪼개야합니다. 예를들어, 주소 정보에서 도로명과 국가 정보를 분리하는 것을 고려해 놓으면, 국가별로 사람을 조회할 수 있게 됩니다.






## 2. 데이터베이스 구조 : 데이터베이스의 구성 요소

데이터베이스를 시각적으로 나열합니다.

데이터베이스 내부에서는, 서로 관련된 데이터는 테이블로 묶여있고, 각 테이블은 마치 스프레드시트처럼 행(row)과 열(column)로 구성되어있습니다.

테이블의 각 행(row)를 레코드(record)라고 합니다. 레코드는 어떤 것 또는 어떤 사람의 정보를 담고 있습니다. 반면, 컬럼(column, 필드(field) 또는 속성(attribute))은 각 레코드에 표시되는 단일 유형의 정보들을 포함하고 있습니다. 

레코드들이 일관된 데이터를 저장하게 하기 위해서는 각 컬럼별로 적합한 데이터 유형을 지정해야 합니다. 일반적으로 다음과 같은 데이터 유형이 있습니다.

- CHAR - 고정된 길이의 문자
- VARCHAR - 가변적 길이의 문자
- TEXT - 많은 양의 문자
- INT - 음수이거나 양수인 정수
- FLOAT, DOUBLE - 소수점을 가질 수 있는 숫자
- BULB - 바이너리 데이터

개체-관계 다이어그램(Entity-Relationship Diagram)이라는 데이터베이스를 시각적 개요를 그릴 때는 실제 테이블을 포함하지 않습니다. 대신, 테이블 하나가 한 개의 박스로 표현됩니다. 각 박스의 제목은 해당 테이블이 어떤 데이터를 다루는지 나타내고, 그 아래에 속성들이 다음과 같이 표시됩니다.

![2018_06_22_db_01](/assets/img/2018_06_22_db_01.PNG)

마지막으로, 테이블별로 어떤 속성이 프라이머리 키(Primary key)가 될지 정해야 합니다. 프라이머리 키란, 각 개체의 고유 인식자 입니다.

프라이머리 키로 선택된 속성은 고유하고, 변경되지 않고, 언제나 존재하는 상태여야 합니다. 또한, 여러가지 필드를 함께 사용하여 프라이머리 키를 만들어낼 수 있습니다. 이런 키를 복합키(conposite key)라고 부릅니다.





## 3. 개체 간 관계 생성하기

데이터베이스 테이블이 여러 테이블로 변환되고 나면, 이제 테이블간의 관계를 분석할 수 있게 됩니다.

카디널리티(Cardinaliry)란 두 개의 관련된 테이블 간에 상호작용하는 인자의 개수를 의미합니다. 카디널리티를 인식하게 되면 데이터를 가장 효율적으로 테이블에 나눌 수 있게 됩니다.

각 개체는 다른 모든 개체와 관계를 맺을 수 있죠. 그 관계는 보통 다음의 세 가지 유형 중의 하나입니다.



**1. 일대일 관계 (One-to-one-relationship)**

만약 개체B의 각 인스턴스에 대해 하나의 개체A의 인스턴스가 존재할 때 이 둘은 일대일 관계라고 합니다. 이와 같은 관계를 ER 다이어그램에서는 각 끝의 대시 기호를 그린 선분을 통해서 나타낼 수 있습니다.

![2018_06_22_db_02](/assets/img/2018_06_22_db_02.PNG)

반드시 1:1 관계로 테이블을 구성해야 할 필요가 없는한, 1:1 관계는 대개 두 테이블의 데이터를 단일 테이블로 통합하는 것이 더 낫다는 것을 의미합니다. 

데이터가 정확히 일치하는지 보장하기 위해서, 각 테이블에 최소한 한 개 이상에 같은 컬럼을 가지고 있어야 합니다. 이 때 주로 프라이머리 키를 사용합니다.



**2. 일대 다 관계(One-to-many-relayionship)**

한 테이블의 레코드가 다수의 항목과 관련되었을 때 발생합니다. 예를들어, 한 명의 고객은 여러 개의 주문을 생성할 수 있습니다. 일대다(1:M) 관계는 다음의 예시와 같이 "까마귀 발 표기법"이라는 표기법으로 표시됩니다.

![2018_06_22_db_03](/assets/img/2018_06_22_db_03.PNG)

데이터베이스를 구성할 때 1:M 관계를 구현하려면, 한쪽의 프라이머리 키를 다른 쪽의 속성으로 추가하면 됩니다. 이 방식으로 다른 테이블에 프라이머리 키가 나열될 때, 이 프라이머리 키를 외래키(foreign key)라고 부릅니다. 1:M에서 "1"방면의 테이블이 상위테이블이라 부르며, 다른 방면의 테이블을 하위 테이블 이라고 합니다.



**3. 다대다 관계(Many-to-many-relationship)**

한 테이블의 복수의 개체가 다른 테이블의 복수의 개체와 관련이 있을 때, 이 둘은 다대다(M:N)관계가 있다고 합니다. 이러한 관계는 학생과 수업 간의 경우에서 발생할 수 있는데요, 학생 한 명은 여러 수업을 수강할 수 있고, 한 수업은 여러 명의 학생으로 구성되기 때문입니다.

![2018_06_22_db_04](/assets/img/2018_06_22_db_04.PNG)

하지만, 이런 관계는 데이터베이스에서 직접 구현할 수 없습니다. 대신, 이러한 관계를 두 개의 일대다 관계로 분리해야합니다.

연결 테이블의 각 레코드는 인접한 테이블의 개체 중 두 개를 연결합니다(이 레코드는 부가적인 정보도 포함하게 되죠). 예를들어, 학생과 수업은 이런 모습을 보일 겁니다.

![2018_06_22_db_05](/assets/img/2018_06_22_db_05.PNG)



**4. 의존적 관계(Dependency relationship)**

관계를 분석하는 또 다른 방법은 관계에서 한 방면이 존재하기 위해 어떤 방면이 반드시 존재해야 하는지 생각해 보는 것입니다. 필수적이지 않은 방면은 선분에서 대쉬 기호 옆에 동그라미를 표시합니다. 예를들어 UN에서 대표를 하기 위해서는 국가가 존재해야 하지만, 그 반대는 그렇지 않습니다.

![2018_06_22_db_06](/assets/img/2018_06_22_db_06.PNG)

두 개체는 서로 의존적이게 됩니다. 한 방면은 다른 한 방면 없이 존재할 수 없습니다.



**5. 다차원 데이터(Multidimesional Data)**

단일 데이터 유형을 복수의 차원에서 접근하고자 하는 경우가 있습니다. 예를들어 고객 당 판매량, 현재 상태, 그리고 판매 월을 알고자 합니다. 이런 상황에서는, 중앙 테이블을 만들어 다른 고객, 상태, 그리고 판매 월 테이블이 참조할 수 있도록 합니다

![2018_06_22_db_07](/assets/img/2018_06_22_db_07.PNG)





## 4. 데이터 베이스 구현

앞선 설계 단계에서 도출된 데이터베이스 스키마를 실제 파일로 생성하는 단계입니다.
특정 DBMS에서 데이터 베이스 스키마를 생성한 후 데이터를 입력하며, 응용 프로그램에서 사용하기 위한 트랜잭션을 생성합니다.
> 트랜잭션이란, 
> 데이터베이스의 상태를 변화시키기 위해서 수행하는 작업의 단위를 뜻한다.
> 즉, SQL을 이용하여 데이터베이스에 접근하는 것을 의마한다.
> ex) SELECT, INSERT, DELETE, UPDATE







참고 : http://gomcine.tistory.com/entry/Database-5-ER-%EB%AA%A8%EB%8D%B8%EC%9D%98-%EA%B0%9C%EB%85%90-%EB%B0%8F-%EC%9A%94%EC%86%8C?category=733455

https://medium.com/@khwsc1/%EB%B2%88%EC%97%AD-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B5%AC%EC%A1%B0%EC%99%80-%EC%84%A4%EA%B3%84-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC-b25792a0aa86

